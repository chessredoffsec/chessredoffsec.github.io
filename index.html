<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Madurez AppSec LATAM</title>

<meta http-equiv="Content-Security-Policy"
      content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'; object-src 'none'; base-uri 'none'">

<style>
body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;margin:0;padding:20px;line-height:1.4}
.wrap{max-width:900px;margin:auto}
.card{border:1px solid #ccc;border-radius:14px;padding:16px;margin-bottom:16px}
h1{margin:0 0 6px;font-size:1.3rem}
.sub{opacity:.85;margin-bottom:14px}
label{font-weight:700}
select,button{font:inherit;padding:10px 12px;border-radius:10px;border:1px solid #aaa}
button{cursor:pointer}
button:disabled{opacity:.5}
.q{margin-top:14px;padding-top:12px;border-top:1px dashed #ccc}
.opt{display:flex;gap:10px;padding:8px;border:1px solid #ddd;border-radius:10px;margin-top:6px}
.score{font-size:1.1rem;font-weight:800}
.badge{display:inline-block;padding:6px 10px;border:1px solid #aaa;border-radius:999px;font-weight:700}
.muted{opacity:.8;font-size:.9rem}
table{width:100%;border-collapse:collapse}
td,th{padding:6px;border-bottom:1px solid #ddd}
</style>
</head>

<body>
<div class="wrap">

<h1>Madurez AppSec LATAM</h1>
<p class="sub">Evaluación de madurez en desarrollo seguro · 10 preguntas · Nota 0–10</p>

<div class="card">
<label>Selecciona tu país (solo para conteo en pantalla):</label><br><br>
<select id="country">
<option value="">— seleccionar —</option>
<option>Ecuador</option>
<option>Uruguay</option>
<option>México</option>
<option>Costa Rica</option>
<option>Panamá</option>
<option>Argentina</option>
<option>Bolivia</option>
<option>Chile</option>
<option>Colombia</option>
<option>Paraguay</option>
<option>Perú</option>
<option>Venezuela</option>
</select>
<button onclick="start()">Comenzar</button>

<p class="muted">
Privacidad: no se recolectan datos personales ni de empresa.  
No cookies, no storage, no envío de datos.
</p>
</div>

<form id="quiz" class="card" style="display:none">
<div id="questions"></div>
<br>
<button type="submit" id="submit" disabled>Ver resultado</button>
</form>

<div id="result" class="card" style="display:none">
<div class="score" id="score"></div>
<div id="level"></div>
<p class="muted" id="hint"></p>

<h3>Respondentes por país (sesión actual)</h3>
<table><tbody id="counts"></tbody></table>
</div>

</div>

<script>
const questions=[
"¿Existe un plan estratégico formal de AppSec?",
"¿Se realizan pentests de forma regular?",
"¿Existen prácticas de seguridad para adopción de IA?",
"¿Hay entrenamientos de seguridad para desarrolladores?",
"¿Se aplican prácticas de seguridad en la IDE?",
"¿Las aplicaciones cloud siguen prácticas de seguridad?",
"¿Existen controles de seguridad en CI/CD?",
"¿Se miden métricas y KPIs de seguridad?",
"¿Las prácticas están alineadas con compliance?",
"¿Existen requisitos de seguridad y modelado de amenazas?"
];

const answers=[
["Inicial (0)",0],["Intermedio (0,5)",0.5],["Avanzado (1)",1]
];

let state={country:"",scores:[],counts:{}};

function start(){
const c=document.getElementById("country").value;
if(!c)return alert("Selecciona un país");
state.country=c;
document.getElementById("quiz").style.display="block";
renderQuestions();
}

function renderQuestions(){
const box=document.getElementById("questions");
box.innerHTML="";
questions.forEach((q,i)=>{
const div=document.createElement("div");
div.className="q";
div.innerHTML=`<strong>${q}</strong>`;
answers.forEach(a=>{
div.innerHTML+=`
<label class="opt">
<input type="radio" name="q${i}" value="${a[1]}" onchange="answer(${i},${a[1]})">
${a[0]}
</label>`;
});
box.appendChild(div);
});
}

function answer(i,v){
state.scores[i]=v;
document.getElementById("submit").disabled=state.scores.length!==10;
}

document.getElementById("quiz").onsubmit=e=>{
e.preventDefault();
const total=state.scores.reduce((a,b)=>a+b,0).toFixed(1);
let lvl="Básico",hint="Enfócate en fundamentos de seguridad.";
if(total>=4) {lvl="En evolución";hint="Buen progreso, estandariza prácticas."}
if(total>=7.5){lvl="Maduro";hint="Mantén consistencia y mejora continua."}

state.counts[state.country]=(state.counts[state.country]||0)+1;

document.getElementById("score").innerText=`Nota: ${total} / 10`;
document.getElementById("level").innerHTML=`<span class="badge">Nivel: ${lvl}</span>`;
document.getElementById("hint").innerText=hint;

renderCounts();
document.getElementById("result").style.display="block";
};

function renderCounts(){
const tb=document.getElementById("counts");
tb.innerHTML="";
Object.entries(state.counts).forEach(([c,n])=>{
tb.innerHTML+=`<tr><td>${c}</td><td>${n}</td></tr>`;
});
}
</script>

</body>
</html>
